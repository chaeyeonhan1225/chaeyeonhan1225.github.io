---
layout: post
title:  "GraphQL"
future: true
date:   2022-09-04 00:40:00 +0900
categories: GraphQL
---
# GraphQL
GraphQL(Graph Query Language)은 페이스북에서 만든 쿼리 언어로서, 그래프로 스키마의 연관관계를 표현한다.
## 구성 요소
- 스키마
- 리졸버
## 그래서 어떤점이 좋은가?
- 클라이언트에서 원하는 값만 가져올 수 있다.
- REST API에 비해 변경에 유연하게 대처할 수 있다.
    - 예시) user에 새 필드가 추가되었는데 REST API는 user/v1/123 에서 user/v2/123을 새로 만들어줘야 하지만 GraphQL에서는 새 필드만 추가하면 된다.
- Federation 기능
## 단점은
- 서버 개발의 복잡성이 커진다.
- 캐싱이 복잡하다.
- 스키마 관리의 리소스가 든다.
## MSA에서 GraphQL 사용하기
MSA 구조에서는 어떻게 GraphQL을 사용할 수 있을까?
간단하게 생각하면 아래와 같이 요청할 수 있다.

필요한 데이터는 상품의 상세 정보, 리뷰 정보, 리뷰 정보에는 작성한 유저
1. 상품 api에서 상품의 정보를 얻어온다.
2. 상품 id로 리뷰 api에서 리뷰 정보를 얻어온다.
3. 리뷰 id로 유저 api에서 유저 정보를 얻어온다.

하지만 실제로 그렇게 하면 네트워크 통신을 왕복으로 3번을 반복하고 클라이언트에서 데이터를 합치는 과정도 필요하다. 

## Apollo Federation
Apollo Federation을 사용하면 클라이언트가 단일 쿼리로 원하는 데이터를 얻을 수 있다.
